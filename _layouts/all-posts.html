---
layout: default
---

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% elsif page.header.video.id and page.header.video.provider %}
  {% include page__hero_video.html %}
{% endif %}

{% assign breadcrumbs_enabled = site.breadcrumbs %}
{% if page.breadcrumbs != null %}
  {% assign breadcrumbs_enabled = page.breadcrumbs %}
{% endif %}
{% if page.url != "/" and breadcrumbs_enabled %}
  {% unless paginator %}
    {% include breadcrumbs.html %}
  {% endunless %}
{% endif %}

<div id="main" role="main">
  {% include sidebar.html %}

  <article class="page" itemscope itemtype="https://schema.org/CreativeWork"{% if page.locale %} lang="{{ page.locale }}"{% endif %}>
    {% if page.title %}<meta itemprop="headline" content="{{ page.title | replace: '|', '&#124;' | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}
    {% if page.excerpt %}<meta itemprop="description" content="{{ page.excerpt | markdownify | strip_html | strip_newlines | escape_once }}">{% endif %}

    <div class="page__inner-wrap">
      {% unless page.header.overlay_color or page.header.overlay_image %}
        <header>
          {% if page.title -%}
          <h1 id="page-title" class="page__title" itemprop="headline">
            {{ page.title | markdownify | remove: "<p>" | remove: "</p>" }}
          </h1>
          {%- endif %}
        </header>
      {% endunless %}

      <section class="page__content" itemprop="text">
        {{ content }}
        
        <!-- View Toggle Controls -->
        <div class="view-controls" style="margin: 2rem 0; text-align: center;">
          <button id="list-view-btn" class="btn btn--primary btn--small view-toggle active" data-view="list">
            <i class="fas fa-list"></i> عرض قائمة
          </button>
          <button id="grid-view-btn" class="btn btn--primary btn--small view-toggle" data-view="grid">
            <i class="fas fa-th"></i> عرض شبكي
          </button>
        </div>

        <!-- Posts Container -->
        <div id="posts-container" class="posts-container list-view">
          {% assign posts = site.posts | where_exp: "item", "item.hidden != true" %}
          
          {% for post in posts %}
            <article class="post-item">
              <div class="post-content">
                <h3 class="post-title">
                  <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                </h3>
                
                <div class="post-meta">
                  <time datetime="{{ post.date | date_to_xmlschema }}">
                    {{ post.date | date: "%d %B %Y" }}
                  </time>
                  {% if post.categories.size > 0 %}
                    <span class="post-categories">
                      {% for category in post.categories %}
                        <span class="category">{{ category }}</span>
                      {% endfor %}
                    </span>
                  {% endif %}
                </div>
                
                {% if post.excerpt %}
                  <div class="post-excerpt">
                    {{ post.excerpt | strip_html | truncatewords: 30 }}
                  </div>
                {% endif %}
                
                <div class="post-tags">
                  {% for tag in post.tags limit: 3 %}
                    <span class="tag">#{{ tag }}</span>
                  {% endfor %}
                </div>
              </div>
            </article>
          {% endfor %}
          
          {% if posts.size == 0 %}
            <div class="no-posts">
              <p>لا توجد مقالات منشورة حتى الآن.</p>
            </div>
          {% endif %}
        </div>
      </section>
    </div>
  </article>
</div>

<!-- Include the toggle JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const listBtn = document.getElementById('list-view-btn');
  const gridBtn = document.getElementById('grid-view-btn');
  const container = document.getElementById('posts-container');
  
  // Get saved view preference or default to list
  const savedView = localStorage.getItem('posts-view') || 'list';
  setView(savedView);
  
  listBtn.addEventListener('click', function() {
    setView('list');
    localStorage.setItem('posts-view', 'list');
  });
  
  gridBtn.addEventListener('click', function() {
    setView('grid');
    localStorage.setItem('posts-view', 'grid');
  });
  
  function setView(view) {
    if (view === 'grid') {
      container.className = 'posts-container grid-view';
      gridBtn.classList.add('active');
      listBtn.classList.remove('active');
    } else {
      container.className = 'posts-container list-view';
      listBtn.classList.add('active');
      gridBtn.classList.remove('active');
    }
  }
});
</script>